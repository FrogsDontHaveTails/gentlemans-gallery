{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/app/ConfigMenu.tsx","webpack:///./src/app/Coyote.ts","webpack:///./src/app/Cursor.tsx","webpack:///./src/app/MainComponent.tsx","webpack:///./src/app/Settings.ts","webpack:///./src/app/app.tsx","webpack:///./src/app/censorImage.ts","webpack:///./src/app/demo.ts","webpack:///./src/app/model.ts","webpack:///./src/app/rules.ts","webpack:///./src/app/xtoys.ts","webpack:///./src/main.tsx","webpack:///./src/app/ConfigMenu.css","webpack:///./src/app/Cursor.css","webpack:///./src/app/MainComponent.css","webpack:///./src/app/app.css","webpack:///./src/app/ConfigMenu.css?5c77","webpack:///./src/app/Cursor.css?8616","webpack:///./src/app/MainComponent.css?5a83","webpack:///./src/app/app.css?57eb","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-backend-cpu/node_modules/seedrandom|crypto","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-core/dist/platforms|node-fetch","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-core/dist/platforms|util","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-core/node_modules/seedrandom|crypto","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-data/dist/iterators|string_decoder","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-data/dist/sources|fs","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/@tensorflow/tfjs-data/dist/util|string_decoder","webpack:///ignored|/home/runner/work/gentlemans-gallery/gentlemans-gallery/node_modules/seedrandom|crypto"],"sourcesContent":["import * as React from 'react';\nimport {ChangeEvent, Component, ReactNode, RefObject} from 'react';\n\nimport {defaultRules, RegionType} from './rules';\nimport {loadDemoImages} from './demo';\nimport {DetectionType} from './model';\nimport {Settings} from './Settings';\nimport './ConfigMenu.css';\n\ninterface State {\n  files: { [P in RegionType]: readonly File[] };\n}\n\ninterface Props {\n  settings: Settings;\n  onSettingsChanged: (changed: Settings) => void;\n  handleFileSelection: (e: ChangeEvent<HTMLInputElement>) => void;\n  handleAlternativeSelection: (files: {\n    [P in RegionType]: readonly File[];\n  }) => void;\n  onSelectCoyoteDeviceClicked: () => void;\n  onForgetCoyoteDeviceClicked: () => void;\n}\n\nexport class ConfigMenu extends Component<Props, State> {\n  private readonly fileSelector: RefObject<HTMLInputElement>;\n  private readonly goodImageSelector: RefObject<HTMLInputElement>;\n  private readonly badImageSelector: RefObject<HTMLInputElement>;\n  private readonly punishImageSelector: RefObject<HTMLInputElement>;\n\n  constructor(props: Readonly<Props>) {\n    super(props);\n    this.state = {files: {HARD_PUNISH: [], FOCUS: [], SOFT_PUNISH: []}};\n    this.fileSelector = React.createRef();\n    this.goodImageSelector = React.createRef();\n    this.badImageSelector = React.createRef();\n    this.punishImageSelector = React.createRef();\n  }\n\n  componentDidMount() {\n    (this.fileSelector.current as any).webkitdirectory = 'true';\n    (this.goodImageSelector.current as any).webkitdirectory = 'true';\n    (this.badImageSelector.current as any).webkitdirectory = 'true';\n    (this.punishImageSelector.current as any).webkitdirectory = 'true';\n  }\n\n  render(): ReactNode {\n    return (\n      <div className=\"setupForms\">\n\n        <details open>\n          <summary>Configure Pury.fi</summary>\n          <p>\n            This tool runs{' '}\n            <a href=\"https://www.patreon.com/puryfi\">\n              with AI support from Pury.fi\n              <img\n                width=\"64\"\n                alt=\"Pury.fi\"\n                src=\"https://pury.fi/site/wp-content/uploads/2021/09/breast_round_black.png\"\n              />\n            </a>.\n            Please install the Puri.fy Firefox extension to use this site.\n          </p>\n        </details>\n\n        <details open>\n          <summary>Select local gallery</summary>\n          <p>Just select a directory that contains images. Yay.</p>\n          <div className=\"form-group\">\n            <label>\n              Select a gallery folder\n              <input\n                ref={this.fileSelector}\n                type=\"file\"\n                onChange={(e) => this.props.handleFileSelection(e)}\n              />\n            </label>\n          </div>\n          <p>\n            Suggestions/PRs for a public domain sample gallery are welcome!\n            <button\n              onClick={() =>\n                loadDemoImages().then((dis) =>\n                  //this.props.handleAlternativeSelection(dis)\n                  alert('FIXME! need to be reimplemented')\n                )\n              }\n            >\n              Load demo images\n            </button>\n          </p>\n        </details>\n        <details>\n          <summary>Select alternative Mode gallery</summary>\n          <p>\n            This gallery uses images from two folders where one folder\n            containers desireable images and other folders contains undesirable\n            or forbidden images.\n          </p>\n          <fieldset>\n            <label>\n              Good images:\n              <input\n                ref={this.goodImageSelector}\n                type=\"file\"\n                onChange={(e) =>\n                  this.setState((state) => ({\n                    ...state,\n                    files: {\n                      ...state.files,\n                      FOCUS: Array.from(e.target.files as ArrayLike<File>),\n                    },\n                  }))\n                }\n              />\n            </label>\n            <br/>\n            <label>\n              Bad images:\n              <input\n                ref={this.badImageSelector}\n                type=\"file\"\n                onChange={(e) =>\n                  this.setState((state) => ({\n                    ...state,\n                    files: {\n                      ...state.files,\n                      SOFT_PUNISH: Array.from(e.target.files as ArrayLike<File>),\n                    },\n                  }))\n                }\n              />\n            </label>\n            <br/>\n            <label>\n              Forbidden images (harsh punishment):\n              <input\n                ref={this.punishImageSelector}\n                type=\"file\"\n                onChange={(e) =>\n                  this.setState((state) => ({\n                    ...state,\n                    files: {\n                      ...state.files,\n                      HARD_PUNISH: Array.from(e.target.files as ArrayLike<File>),\n                    },\n                  }))\n                }\n              />\n            </label>\n            <button\n              onClick={() =>\n                this.props.handleAlternativeSelection(this.state.files)\n              }\n            >\n              Set Images\n            </button>\n          </fieldset>\n        </details>\n\n        <details open>\n          <summary>Rules</summary>\n          <ul>\n            <li>\n              Making Progress by looking at <br/>\n              <select\n                multiple={true}\n                value={this.props.settings.rules.regionMapping.FOCUS}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    rules: {\n                      ...this.props.settings.rules,\n                      regionMapping: {\n                        ...this.props.settings.rules.regionMapping,\n                        FOCUS: (\n                          Array.from(e.target.options) as HTMLOptionElement[]\n                        )\n                          .filter((i) => i.selected)\n                          .map((i) => i.value) as DetectionType[],\n                      },\n                    },\n                  })\n                }\n              >\n                <option value=\"FACE_FEMALE\">female Face</option>\n                <option value=\"FACE_MALE\">male Face</option>\n                <option value=\"ARMPITS_EXPOSED\">armpits (exposed)</option>\n                <option value=\"FEET_COVERED\">feet (covered)</option>\n                <option value=\"FEET_EXPOSED\">feet (exposed)</option>\n                <option value=\"BELLY_EXPOSED\">belly (exposed)</option>\n                <option value=\"BELLY_COVERED\">belly (covered)</option>\n                <option value=\"ANUS_EXPOSED\">anus (exposed)</option>\n                <option value=\"ANUS_COVERED\">anus (covered)</option>\n                <option value=\"BUTTOCKS_EXPOSED\">buttocks (exposed)</option>\n                <option value=\"MALE_GENITALIA_EXPOSED\">\n                  male genitalia (exposed)\n                </option>\n                <option value=\"MALE_GENITALIA_COVERED\">\n                  male genitalia (covered)\n                </option>\n                <option value=\"MALE_BREAST_EXPOSED\">\n                  male breast (exposed)\n                </option>\n                <option value=\"MALE_BREAST_COVERED\">\n                  male breast (covered)\n                </option>\n                <option value=\"FEMALE_BREAST_EXPOSED\">\n                  female breast (exposed)\n                </option>\n                <option value=\"FEMALE_BREAST_COVERED\">\n                  female breast (covered)\n                </option>\n                <option value=\"FEMALE_GENITALIA_EXPOSED\">\n                  female genitalia (exposed)\n                </option>\n                <option value=\"FEMALE_GENITALIA_COVERED\">\n                  female genitalia (covered)\n                </option>\n              </select>\n              <br/>\n              for{' '}\n              <input\n                type=\"number\"\n                value={this.props.settings.rules.focusDuration}\n                min=\"1\"\n                max=\"20\"\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    rules: {\n                      ...this.props.settings.rules,\n                      focusDuration: e.target.valueAsNumber,\n                    },\n                  })\n                }\n              />{' '}\n              seconds\n            </li>\n            <li>\n              Do not stare at <br/>\n              <select\n                multiple={true}\n                value={this.props.settings.rules.regionMapping.SOFT_PUNISH}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    rules: {\n                      ...this.props.settings.rules,\n                      regionMapping: {\n                        ...this.props.settings.rules.regionMapping,\n                        SOFT_PUNISH: (\n                          Array.from(e.target.options) as HTMLOptionElement[]\n                        )\n                          .filter((i) => i.selected)\n                          .map((i) => i.value) as DetectionType[],\n                      },\n                    },\n                  })\n                }\n              >\n                <option value=\"FACE_FEMALE\">female Face</option>\n                <option value=\"FACE_MALE\">male Face</option>\n                <option value=\"ARMPITS_EXPOSED\">armpits (exposed)</option>\n                <option value=\"FEET_COVERED\">feet (covered)</option>\n                <option value=\"FEET_EXPOSED\">feet (exposed)</option>\n                <option value=\"BELLY_EXPOSED\">belly (exposed)</option>\n                <option value=\"BELLY_COVERED\">belly (covered)</option>\n                <option value=\"ANUS_EXPOSED\">anus (exposed)</option>\n                <option value=\"ANUS_COVERED\">anus (covered)</option>\n                <option value=\"BUTTOCKS_EXPOSED\">buttocks (exposed)</option>\n                <option value=\"MALE_GENITALIA_EXPOSED\">\n                  male genitalia (exposed)\n                </option>\n                <option value=\"MALE_GENITALIA_COVERED\">\n                  male genitalia (covered)\n                </option>\n                <option value=\"MALE_BREAST_EXPOSED\">\n                  male breast (exposed)\n                </option>\n                <option value=\"MALE_BREAST_COVERED\">\n                  male breast (covered)\n                </option>\n                <option value=\"FEMALE_BREAST_EXPOSED\">\n                  female breast (exposed)\n                </option>\n                <option value=\"FEMALE_BREAST_COVERED\">\n                  female breast (covered)\n                </option>\n                <option value=\"FEMALE_GENITALIA_EXPOSED\">\n                  female genitalia (exposed)\n                </option>\n                <option value=\"FEMALE_GENITALIA_COVERED\">\n                  female genitalia (covered)\n                </option>\n              </select>{' '}\n              !\n            </li>\n            <li>\n              Especially do not stare at (Hard punished) <br/>\n              <select\n                multiple={true}\n                value={this.props.settings.rules.regionMapping.HARD_PUNISH}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    rules: {\n                      ...this.props.settings.rules,\n                      regionMapping: {\n                        ...this.props.settings.rules.regionMapping,\n                        HARD_PUNISH: (\n                          Array.from(e.target.options) as HTMLOptionElement[]\n                        )\n                          .filter((i) => i.selected)\n                          .map((i) => i.value) as DetectionType[],\n                      },\n                    },\n                  })\n                }\n              >\n                <option value=\"FACE_FEMALE\">female Face</option>\n                <option value=\"FACE_MALE\">male Face</option>\n                <option value=\"ARMPITS_EXPOSED\">armpits (exposed)</option>\n                <option value=\"FEET_COVERED\">feet (covered)</option>\n                <option value=\"FEET_EXPOSED\">feet (exposed)</option>\n                <option value=\"BELLY_EXPOSED\">belly (exposed)</option>\n                <option value=\"BELLY_COVERED\">belly (covered)</option>\n                <option value=\"ANUS_EXPOSED\">anus (exposed)</option>\n                <option value=\"ANUS_COVERED\">anus (covered)</option>\n                <option value=\"BUTTOCKS_EXPOSED\">buttocks (exposed)</option>\n                <option value=\"MALE_GENITALIA_EXPOSED\">\n                  male genitalia (exposed)\n                </option>\n                <option value=\"MALE_GENITALIA_COVERED\">\n                  male genitalia (covered)\n                </option>\n                <option value=\"MALE_BREAST_EXPOSED\">\n                  male breast (exposed)\n                </option>\n                <option value=\"MALE_BREAST_COVERED\">\n                  male breast (covered)\n                </option>\n                <option value=\"FEMALE_BREAST_EXPOSED\">\n                  female breast (exposed)\n                </option>\n                <option value=\"FEMALE_BREAST_COVERED\">\n                  female breast (covered)\n                </option>\n                <option value=\"FEMALE_GENITALIA_EXPOSED\">\n                  female genitalia (exposed)\n                </option>\n                <option value=\"FEMALE_GENITALIA_COVERED\">\n                  female genitalia (covered)\n                </option>\n              </select>{' '}\n              !\n            </li>\n            <li>Not following these rules will be punished.</li>\n            <li>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={this.props.settings.rules.showGaze}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      rules: {\n                        ...this.props.settings.rules,\n                        showGaze: e.target.checked,\n                      },\n                    })\n                  }\n                />{' '}\n                Gaze tracing\n              </label>\n            </li>\n            <li>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={this.props.settings.rules.allowSkipImage}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      rules: {\n                        ...this.props.settings.rules,\n                        allowSkipImage: e.target.checked,\n                      },\n                    })\n                  }\n                />{' '}\n                Allow skip image\n              </label>\n            </li>\n            <li>\n              <label>\n                Visual Warning{' '}\n                <select\n                  value={this.props.settings.rules.softFilter}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      rules: {\n                        ...this.props.settings.rules,\n                        softFilter: e.target.value as any,\n                      },\n                    })\n                  }\n                >\n                  {' '}\n                  <option value=\"saturate\">Saturate</option>\n                  <option value=\"pixelate\">Pixelate</option>\n                </select>\n              </label>\n            </li>\n            <li>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={this.props.settings.rules.playSounds}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      rules: {\n                        ...this.props.settings.rules,\n                        playSounds: e.target.checked,\n                      },\n                    })\n                  }\n                />{' '}\n                Play Sounds\n              </label>\n            </li>\n            {document.fullscreenEnabled ? (\n              <li>\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    checked={this.props.settings.rules.fullscreen}\n                    onChange={(e) =>\n                      this.props.onSettingsChanged({\n                        ...this.props.settings,\n                        rules: {\n                          ...this.props.settings.rules,\n                          fullscreen: e.target.checked,\n                        },\n                      })\n                    }\n                  />{' '}\n                  Fullscreen\n                </label>\n              </li>\n            ) : (\n              ''\n            )}\n            <li>\n              <label>\n                <input\n                  type=\"checkbox\"\n                  checked={this.props.settings.rules.shuffleGallery}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      rules: {\n                        ...this.props.settings.rules,\n                        shuffleGallery: e.target.checked,\n                      },\n                    })\n                  }\n                />{' '}\n                Shuffle Gallery\n              </label>\n            </li>\n          </ul>\n          <button\n            onClick={(e) =>\n              this.props.onSettingsChanged({\n                ...this.props.settings,\n                rules: defaultRules,\n              })\n            }\n          >\n            Reset to defaults\n          </button>\n        </details>\n\n        <details>\n          <summary>XToys.app</summary>\n          <div className=\"form-group\">\n            <label>\n              Use XToys.app?\n              <input\n                type=\"checkbox\"\n                checked={this.props.settings.xtoys.use}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    xtoys: {\n                      ...this.props.settings.xtoys,\n                      use: e.target.checked,\n                    },\n                  })\n                }\n              />\n            </label>\n          </div>\n          {this.props.settings.xtoys.use ? (\n            <div>\n              <div className=\"form-group\">\n                <p>\n                  You have to register a custom toy at{' '}\n                  <a href=\"https://xtoys.app/me/custom-toys\">XToys.app</a>.\n                  Create a new Websocket toy, choose the type \"Generic\n                  Input/Output\". Choose a name and/or description as you prefer.\n                  Click \"Generate Websocket Info\". Then save your toy and add\n                  the generated websocket and token codes here:\n                </p>\n                <label>\n                  Websocket:\n                  <input\n                    type=\"text\"\n                    value={this.props.settings.xtoys.websocket}\n                    onChange={(e) =>\n                      this.props.onSettingsChanged({\n                        ...this.props.settings,\n                        xtoys: {\n                          ...this.props.settings.xtoys,\n                          websocket: e.target.value,\n                        },\n                      })\n                    }\n                  />\n                </label>\n                <label>\n                  Token:\n                  <input\n                    type=\"text\"\n                    value={this.props.settings.xtoys.token}\n                    onChange={(e) =>\n                      this.props.onSettingsChanged({\n                        ...this.props.settings,\n                        xtoys: {\n                          ...this.props.settings.xtoys,\n                          token: e.target.value,\n                        },\n                      })\n                    }\n                  />\n                </label>\n              </div>\n            </div>\n          ) : (\n            ''\n          )}\n        </details>\n\n        <details>\n          <summary>Tobii EyeX</summary>\n          <p>\n            You can try this gallery via mouse but it is intended to be used\n            with a eye tracking devices. Currently the Tobii Eye 4C is supported\n            using the\n            <a\n              href=\"https://github.com/rezreal/Tobii-EyeX-Web-Socket-Server/releases\"\n              target=\"_blank\"\n            >\n              Tobii-EyeX-Web-Socket-Server\n            </a>\n            . As a preparation, install your Tobii Tracking software and launch\n            the <em>TobiiSocketServer.exe</em>.\n          </p>\n          <div className=\"form-group\">\n            <label>\n              Use Tobii?\n              <input\n                type=\"checkbox\"\n                checked={this.props.settings.tobii.use}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    tobii: {\n                      ...this.props.settings.tobii,\n                      use: e.target.checked,\n                    },\n                  })\n                }\n              />\n            </label>\n          </div>\n          {this.props.settings.tobii.use ? (\n            <div className=\"form-group\">\n              <label>\n                Disable mouse?\n                <input\n                  type=\"checkbox\"\n                  checked={this.props.settings.tobii.disableMouse}\n                  onChange={(e) =>\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      tobii: {\n                        ...this.props.settings.tobii,\n                        disableMouse: e.target.checked,\n                      },\n                    })\n                  }\n                />\n              </label>\n            </div>\n          ) : (\n            ''\n          )}\n          {this.props.settings.tobii.use ? (\n            <div className=\"form-group\">\n              <label>\n                Tobii Websocket Server\n                <input\n                  type=\"text\"\n                  value={this.props.settings.tobii.server || ''}\n                  onChange={(e) => {\n                    this.props.onSettingsChanged({\n                      ...this.props.settings,\n                      tobii: {\n                        ...this.props.settings.tobii,\n                        server: e.target.value,\n                      },\n                    });\n                  }}\n                />\n              </label>\n            </div>\n          ) : (\n            ''\n          )}\n        </details>\n\n        <details>\n          <summary>WebGazer</summary>\n          <p>\n            You can use WebGazer to track your gaze via webcam. You must permit\n            access to use of your camera. The video is only processed locally\n            and not sent anywhere.\n          </p>\n          <div className=\"form-group\">\n            <label>\n              Use Webgazer?\n              <input\n                type=\"checkbox\"\n                checked={this.props.settings.webgazer.use}\n                onChange={async (e) => {\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    webgazer: {\n                      ...this.props.settings.webgazer,\n                      use: e.target.checked,\n                    },\n                  });\n                }}\n              />\n            </label>\n          </div>\n        </details>\n\n        <details>\n          <summary>DG-Labs Coyote</summary>\n          <p>\n            Punishments and teasing should be real! Link your DG-Labs Coyote\n            EStim device to feel real punishments. Make sure you run a\n            web-bluetooth compatible browser (e.g. Chrome or Edge).\n          </p>\n          <div className=\"form-group\">\n            <label>\n              Use Coyote?\n              <input\n                type=\"checkbox\"\n                checked={this.props.settings.coyote.use}\n                onChange={(e) =>\n                  this.props.onSettingsChanged({\n                    ...this.props.settings,\n                    coyote: {\n                      ...this.props.settings.coyote,\n                      use: e.target.checked,\n                    },\n                  })\n                }\n              />\n            </label>\n          </div>\n          {this.props.settings.coyote.use ? (\n            <div className=\"form-group\">\n              <button onClick={(e) => this.props.onSelectCoyoteDeviceClicked()}>\n                {!this.props.settings.coyote.pairedDeviceId\n                  ? 'Select device'\n                  : 'Reconnect device'}\n              </button>\n              {this.props.settings.coyote.pairedDeviceId ? (\n                <div>\n                  <label>\n                    DeviceId:{' '}\n                    <input\n                      type=\"text\"\n                      readOnly={true}\n                      value={this.props.settings.coyote.pairedDeviceId}\n                    />\n                  </label>\n                  <button\n                    onClick={() => this.props.onForgetCoyoteDeviceClicked()}\n                  >\n                    Forget Device\n                  </button>\n                  <div className=\"form-group\">\n                    <label>\n                      Power Level (Channel A)\n                      <input\n                        type=\"number\"\n                        step=\"7\"\n                        value={this.props.settings.coyote.powerLevel}\n                        onChange={(e) => {\n                          this.props.onSettingsChanged({\n                            ...this.props.settings,\n                            coyote: {\n                              ...this.props.settings.coyote,\n                              powerLevel: e.target.valueAsNumber,\n                            },\n                          });\n                        }}\n                      />\n                    </label>\n                  </div>\n                </div>\n              ) : (\n                ''\n              )}\n            </div>\n          ) : (\n            ''\n          )}\n        </details>\n      </div>\n    );\n  }\n}\n","const coyoteService = '955a180b-0fe2-f5aa-a094-84b8d4f3e8ad';\n\nconst configCharacteristic = '955a1507-0fe2-f5aa-a094-84b8d4f3e8ad';\nconst POWER_CHARACTERISTIC = '955a1504-0fe2-f5aa-a094-84b8d4f3e8ad';\nconst PATTERN_A_CHARACTERISTIC = '955a1506-0fe2-f5aa-a094-84b8d4f3e8ad';\nconst PATTERN_B_CHARACTERISTIC = '955a1505-0fe2-f5aa-a094-84b8d4f3e8ad';\n\nconst batteryService = '955a180a-0fe2-f5aa-a094-84b8d4f3e8ad';\nconst batteryCharacteristic = '955a1500-0fe2-f5aa-a094-84b8d4f3e8ad';\n\nfunction flipFirstAndThirdByte(buffer: ArrayBuffer): void {\n  const bufferBytes = new Uint8Array(buffer);\n  const b = bufferBytes[0];\n  bufferBytes[0] = bufferBytes[2];\n  bufferBytes[2] = b;\n}\n\n/**\n * @param {number} powerA\n * @param {number} powerB\n * @return {ArrayBuffer}\n */\nexport function encodePower({ powerA, powerB }: CoyotePower): ArrayBuffer {\n  /**\n   * notify/write: 3 bytes: zero(2) ~ uint(11).as(\"powerLevelB\") ~uint(11).as(\"powerLevelA\")\n   * 0 0 a a a a a a | a a a a a b b b | b b b b b b b b\n   * Power levels must likely be a multiple of \"powerStep\" and between 0 and \"maxPower\"\n   * (as obtained through config attribute.)\n   */\n  const buffer = new ArrayBuffer(3);\n  const view = new DataView(buffer);\n  view.setUint8(0, (powerA >>> 5) & 0b00111111);\n  view.setUint8(\n    1,\n    ((powerA & 0b00011111) << 3) | ((powerB & 0b11111111111) >>> 8)\n  );\n  view.setUint8(2, powerB & 0b11111111);\n\n  flipFirstAndThirdByte(buffer);\n  return buffer;\n}\n\n/**\n * @return {[number, number]} powerA and powerB\n */\nexport function parsePower(dataView: DataView): CoyotePower {\n  flipFirstAndThirdByte(dataView.buffer);\n  // notify/write: 3 bytes: flipFirstAndThirdByte(zero(2) ~ uint(11).as(\"powerLevelB\") ~uint(11).as(\"powerLevelA\")\n  const powerA = dataView.getUint16(0) >> 3; // push the remainder of B out of the first 2 bytes\n  const powerB = dataView.getUint16(1) & 0b0000011111111111; // push the remainder A out of the last 2 bytes\n  return { powerA, powerB };\n}\n\n/**\n * @param {DataView} dataView\n * @return {[number, number, number]} ax ay az\n */\nexport function parsePattern(dataView: DataView): CoyotePattern {\n  flipFirstAndThirdByte(dataView.buffer);\n  // flipFirstAndThirdByte(zero(4) ~ uint(5).as(\"az\") ~ uint(10).as(\"ay\") ~ uint(5).as(\"ax\"))\n  // 0000zzzz | zyyyyyyy | yyyxxxxx\n  const az = (dataView.getUint16(0) & 0b0000111110000000) >>> 7;\n  const ay =\n    ((dataView.getUint16(0) & 0b0000000001111111) << 3) |\n    ((dataView.getUint8(2) & 0b11100000) >>> 5);\n  const ax = dataView.getUint8(2) & 0b00011111;\n  return { pulseDuration: ax, pauseDuration: ay, amplitude: az };\n}\n\nfunction encodePattern({\n  pulseDuration,\n  pauseDuration,\n  amplitude,\n}: CoyotePattern): ArrayBuffer {\n  const buffer = new ArrayBuffer(3);\n  // flipFirstAndThirdByte(zero(4) ~ uint(5).as(\"az\") ~ uint(10).as(\"ay\") ~ uint(5).as(\"ax\"))\n  // 0000zzzz | zyyyyyyy | yyyxxxxx\n  const view = new DataView(buffer);\n  view.setUint8(0, (amplitude & 0b00011110) >>> 1);\n  view.setUint16(\n    1,\n    ((amplitude & 0b00000001) << 15) |\n      ((pauseDuration & 0b0000001111111111) << 5) |\n      (pulseDuration & 0b00011111)\n  );\n\n  flipFirstAndThirdByte(buffer);\n  return buffer;\n}\n\nexport interface CoyotePower {\n  powerA: number;\n  powerB: number;\n}\n\nexport interface CoyotePattern {\n  /** Duty Cycle (spiky) 0..32 (smooth) */\n  pulseDuration: number;\n  /** LFO pulse duration in milliseconds 0..1024 */\n  pauseDuration: number;\n  /** Amplitude, 0..32 */\n  amplitude: number;\n}\n\nexport interface CoyoteState {\n  maxPower: number;\n  powerStep: number;\n  power: CoyotePower;\n  patternA: CoyotePattern;\n  patternB: CoyotePattern;\n  batteryLevel: number;\n}\n\nexport interface CoyoteDevice {\n  writePower(power: CoyotePower): Promise<void>;\n  writePatternA(power: CoyotePattern, duration: number): Promise<void>;\n  writePatternB(power: CoyotePattern, duration: number): Promise<void>;\n\n  stop(): Promise<void>;\n\n  readonly id: string;\n}\n\n/**\n * Must be triggered via user intent.\n */\nexport async function pairDevice(\n  batteryChangeCallback?: (batteryLevel: number) => void,\n  powerChangedCallback?: (power: CoyotePower) => void,\n  previousDeviceId?: string\n): Promise<[CoyoteState, CoyoteDevice]> {\n  const filters = [\n    {\n      namePrefix: 'D-LAB',\n    },\n  ];\n\n  const previousDevices: BluetoothDevice[] | undefined = await (\n    navigator as any\n  ).bluetooth?.getDevices();\n  const previousDevice: BluetoothDevice | undefined = previousDevices?.find(\n    (d) => d.id === previousDeviceId\n  );\n  const device =\n    previousDevice ||\n    (await ((navigator as any).bluetooth as Bluetooth).requestDevice({\n      filters: filters,\n      optionalServices: [coyoteService, batteryService],\n    }));\n\n  console.log('Connecting to GATT Server...');\n  const server = await device.gatt!.connect();\n\n  console.log('Getting Coyote Service...');\n  const service = await server.getPrimaryService(coyoteService);\n\n  console.log('Getting ConfigMenu Characteristic...');\n  const config = await service.getCharacteristic(configCharacteristic);\n\n  console.log('Reading ConfigMenu Characteristic...');\n  // read: 3 bytes: flipFirstAndThirdByte(skip(5) ~ uint(11).as(\"maxPower\") ~ uint8.as(\"powerStep\"))\n  const configValue = await config.readValue();\n  flipFirstAndThirdByte(configValue.buffer);\n  const maxPower = configValue.getUint16(0);\n  const powerStep = configValue.getUint8(2);\n\n  const powerCharacteristic = await service.getCharacteristic(\n    POWER_CHARACTERISTIC\n  );\n  console.log('Read Power value...');\n  const power = parsePower(await powerCharacteristic.readValue());\n\n  if (powerChangedCallback) {\n    console.log('Subscribing to Power value...');\n    powerCharacteristic.addEventListener(\n      'characteristicvaluechanged',\n      (event) => {\n        const currentPower = parsePower(powerCharacteristic.value!);\n        powerChangedCallback(currentPower);\n      }\n    );\n    await powerCharacteristic.startNotifications();\n  }\n\n  const patternACharacteristic = await service.getCharacteristic(\n    PATTERN_A_CHARACTERISTIC\n  );\n  const patternBCharacteristic = await service.getCharacteristic(\n    PATTERN_B_CHARACTERISTIC\n  );\n\n  let patternA = parsePattern(await patternACharacteristic.readValue());\n  let patternB = parsePattern(await patternBCharacteristic.readValue());\n\n  let untilA: number = -1;\n  let untilB: number = -1;\n\n  console.log('Getting Battery Service...');\n  const battery = await server.getPrimaryService(batteryService);\n\n  console.log('Getting Battery Level Characteristic...');\n  const batteryLevelCharacteristic = await battery.getCharacteristic(\n    batteryCharacteristic\n  );\n  const batteryLevel = (await batteryLevelCharacteristic.readValue()).getUint8(\n    0\n  );\n  if (batteryChangeCallback) {\n    batteryLevelCharacteristic.addEventListener(\n      'characteristicvaluechanged',\n      (e: Event) => {\n        const currentBatteryLevel =\n          batteryLevelCharacteristic.value!.getUint8(0);\n        batteryChangeCallback(currentBatteryLevel);\n      }\n    );\n  }\n\n  console.log('Connected to coyote!');\n\n  let timerHandle: number | undefined;\n\n  function startTimer() {\n    if (timerHandle !== undefined) {\n      return;\n    }\n    timerHandle = window.setInterval(async () => {\n      if (untilA > Date.now()) {\n        await patternACharacteristic.writeValue(encodePattern(patternA));\n      }\n      if (untilB > Date.now()) {\n        await patternACharacteristic.writeValue(encodePattern(patternB));\n      }\n\n      //await patternBCharacteristic.writeValue(encodePattern(patternB));\n    }, 40);\n  }\n\n  function stopTimer() {\n    clearInterval(timerHandle);\n    timerHandle = undefined;\n  }\n\n  return [\n    { maxPower, power, powerStep, patternA, patternB, batteryLevel },\n    {\n      id: device.id,\n      writePower(powerLevels: CoyotePower): Promise<void> {\n        return powerCharacteristic.writeValue(encodePower(powerLevels));\n      },\n      writePatternA(pattern: CoyotePattern, duration: number): Promise<void> {\n        patternA = pattern;\n        untilA = Date.now() + duration;\n        startTimer();\n        return Promise.resolve();\n      },\n      writePatternB(pattern: CoyotePattern, duration: number): Promise<void> {\n        patternB = pattern;\n        untilB = Date.now() + duration;\n        startTimer();\n        return Promise.resolve();\n      },\n      stop(): Promise<void> {\n        stopTimer();\n        return powerCharacteristic.writeValue(\n          encodePower({ powerA: 0, powerB: 0 })\n        );\n      },\n    },\n  ];\n}\n","import { FunctionComponent } from 'react';\n\nimport './Cursor.css';\nimport { RegionType } from './rules';\nimport * as React from 'react';\n\nfunction calculateStyle(size: number, position: { x: number; y: number }) {\n  return {\n    top: position.y - size / 2,\n    left: position.x - size / 2,\n    width: size,\n    height: size,\n  };\n}\n\ninterface Props {\n  position: { x: number; y: number };\n  size: number;\n  hint?: RegionType;\n}\n\nexport const Cursor: FunctionComponent<Props> = ({ position, size, hint }) => (\n  <div\n    className=\"cursor\"\n    data-hint={hint}\n    style={calculateStyle(size, position)}\n  >\n    <div className=\"lds-ripple\">\n      <div></div>\n    </div>\n  </div>\n);\n","import {\n  PurifyMetadata,\n  DetectionType,\n  PurifyDetection,\n  loadmodel,\n  processImage,\n  BoundingBox, toPurifyDetections,\n} from './model';\nimport {\n  Component,\n  ChangeEvent,\n  MouseEvent,\n  RefObject,\n  createRef,\n} from 'react';\n\nimport * as React from 'react';\nimport {\n  Subject,\n  BehaviorSubject,\n  interval,\n  takeUntil,\n  distinctUntilChanged,\n  throttle,\n  of,\n  delay,\n  map,\n  tap,\n  switchMap, throttleTime\n} from 'rxjs';\n\nimport { Cursor } from './Cursor';\nimport './MainComponent.css';\nimport { CoyoteDevice, pairDevice } from './Coyote';\nimport { ConfigMenu } from './ConfigMenu';\nimport { DEFAULT_SETTINGS, Settings } from './Settings';\nimport { RegionType } from './rules';\nimport { censorImage, loadImage, readAsDataUrl } from './censorImage';\nimport * as tf from '@tensorflow/tfjs';\nimport { XToysClient } from './xtoys';\n\nimport { ProtocolFrame } from './TobiiClient';\n\ntype Props = Record<string, never>\n\ninterface SlideData {\n  readonly dataUrl: string;\n  readonly dataUrlCensored: string;\n  readonly name: string;\n  readonly detections: readonly PurifyDetection[];\n  readonly naturalWidth: number;\n  readonly naturalHeight: number;\n}\n\ninterface State extends Settings {\n  readonly slides: readonly { images: readonly File[] }[];\n\n  readonly currentSlide: number;\n  readonly currentSlideData: SlideData[];\n\n  readonly cursorPosition: { x: number; y: number };\n  readonly cursorHint?: RegionType;\n  readonly stats: {\n    readonly points: number;\n    readonly failures: number;\n  };\n\n  readonly phase: 'SETUP' | 'INGAME' | 'WON';\n  readonly pauseUntil: number;\n}\n\nconst DEFAULT_STATE: State = {\n  ...DEFAULT_SETTINGS,\n  slides: [],\n  currentSlide: 0,\n  currentSlideData: [],\n  cursorPosition: { x: -1000, y: -1000 },\n  stats: { points: 0, failures: 0 },\n  phase: 'SETUP',\n  pauseUntil: 0,\n};\n\nexport class MainComponent extends Component<Props, State> {\n  constructor(props: Readonly<Props> | Props) {\n    super(props);\n    this.state = DEFAULT_STATE;\n    this.startCoyote = this.startCoyote.bind(this);\n    this.forgetCoyote = this.forgetCoyote.bind(this);\n    this.handlePurifyFileSelection = this.handlePurifyFileSelection.bind(this);\n    this.nextSlide = this.nextSlide.bind(this);\n    this.handleMouseMoveOnPane = this.handleMouseMoveOnPane.bind(this);\n    this.renderPane = createRef();\n    this.audioDing = createRef();\n    this.audioMistake = createRef();\n  }\n\n  gazeHits$: BehaviorSubject<DetectionType | undefined> = new BehaviorSubject<DetectionType | undefined>(\n    undefined\n  );\n  eyesTracked$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  presence$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false);\n  destroy$: Subject<unknown> = new Subject<unknown>();\n\n  slideChanges$: BehaviorSubject<readonly string[] | undefined> =\n    new BehaviorSubject<readonly string[] | undefined>(undefined);\n\n  xtoys: XToysClient | undefined;\n  tobiiWs: WebSocket | undefined;\n  coyoteDevice: CoyoteDevice | undefined;\n  tobiiScreenWidth: number = window.screen.width;\n  tobiiScreenHeight: number = window.screen.height;\n\n  private forgetCoyote() {\n    this.setState((prev) => ({\n      ...prev,\n      coyote: { ...prev.coyote, pairedDeviceId: undefined },\n    }));\n  }\n\n  private async startCoyote(): Promise<void> {\n    const [coyoteState, coyoteDevice] = await pairDevice(\n      (level) => {\n        console.info(`Coyote at battery-level ${level}`);\n      },\n      ({ powerA, powerB }) =>\n        console.info(`Coyote at power-level a:${powerA} ${powerB})`),\n      this.state.coyote.pairedDeviceId\n    );\n    this.setState((prev) => ({\n      ...prev,\n      coyote: { ...prev.coyote, pairedDeviceId: coyoteDevice.id },\n    }));\n    this.coyoteDevice = coyoteDevice;\n    await this.coyoteDevice!.writePower({\n      powerA: this.state.coyote.powerLevel,\n      powerB: 7,\n    });\n  }\n\n  private startWebGazer(): void {\n    alert('FIXME: startWebGazer()');\n    //TODO: fixme\n    /*webgazer.setGazeListener(function(data, elapsedTime) {\n      if (data == null) {\n        return;\n      }\n      var xprediction = data.x; //these x coordinates are relative to the viewport\n      var yprediction = data.y; //these y coordinates are relative to the viewport\n      console.log(elapsedTime); //elapsed time is based on time since begin was called\n    }).begin();\n    */\n  }\n\n  private startTobii(): void {\n    if (!this.state.tobii.use || this.state.tobii.server) {\n      return;\n    }\n    const ws = new WebSocket(this.state.tobii.server!, ['Tobii.Interaction']);\n\n    ws.onmessage = (m) => {\n      const parsed = JSON.parse(m.data) as ProtocolFrame;\n      if (parsed.type === 'state') {\n        this.tobiiScreenWidth = parsed.data.screenBounds.Width;\n        this.tobiiScreenHeight = parsed.data.screenBounds.Height;\n        if (parsed.data.userPresence !== 'Unknown') {\n          this.presence$.next(parsed.data.userPresence === 'Present');\n        }\n      } else if (parsed.type === 'gazePoint') {\n        const gaze = parsed.data;\n        const cutHeight = window.outerHeight - window.innerHeight;\n        const cutWidth = window.outerWidth - window.innerWidth;\n        const clientPoint = {\n          x:\n            (gaze.X * window.screen.width) / this.tobiiScreenWidth -\n            window.screenX -\n            cutWidth,\n          y:\n            (gaze.Y * window.screen.height) / this.tobiiScreenHeight -\n            window.screenY -\n            cutHeight,\n        };\n\n        this.moveToClient(clientPoint);\n      } else if (parsed.type === 'eyePosition') {\n        const eyePosition = parsed.data;\n        this.eyesTracked$.next(\n          eyePosition.HasLeftEyePosition && eyePosition.HasRightEyePosition\n        );\n      }\n    };\n    ws.onopen = () => {\n      ws.send('state');\n      ws.send('startGazePoint');\n      //ws.send('startEyePosition');\n    };\n    this.tobiiWs = ws;\n  }\n\n  componentDidMount(): void {\n     this.gazeHits$\n      .pipe(\n        takeUntil(this.destroy$),\n        distinctUntilChanged(),\n        throttle(\n          () => {\n            const delayUntil = Math.max(0, this.state.pauseUntil - Date.now());\n            return of().pipe(delay(delayUntil));\n          },\n          { leading: true, trailing: true }\n        ),\n\n        map((detection?: DetectionType) => {\n          if (!detection) return undefined;\n          const region = this.detectionToRegionType(detection);\n          if (region && detection) {\n            this.xtoys?.sendXToys({\n              type: 'lookAt',\n              region,\n              detection,\n            });\n          }\n          return region;\n        }),\n        tap((regionType?: RegionType) => {\n          void this.renderPane?.current?.offsetWidth;\n          switch (regionType) {\n            case 'FOCUS':\n              this.renderPane.current!.dataset.region = 'FOCUS';\n              this.teaseShock();\n              break;\n            case 'HARD_PUNISH':\n              this.renderPane.current!.dataset.region = 'HARD_PUNISH';\n              this.punishShock();\n              this.xtoys?.sendXToys({ type: 'punish', severity: 'hard' });\n\n              break;\n            case 'SOFT_PUNISH':\n              this.renderPane.current!.dataset.region = 'SOFT_PUNISH';\n              this.punishShock();\n              this.xtoys?.sendXToys({ type: 'punish', severity: 'soft' });\n\n              break;\n            default:\n              if (this.renderPane.current) {\n                this.renderPane.current.dataset.region = '';\n              }\n          }\n        }),\n        switchMap((zone) =>\n          of(zone).pipe(\n            delay(\n              zone === 'FOCUS' ? this.state.rules.focusDuration * 1000 : 200\n            )\n          )\n        ),\n        tap((regionType) => {\n          if (this.renderPane.current) {\n            this.renderPane.current.dataset.region = '';\n          }\n        }),\n        // not entirely sure why this is needed, avoids double submits\n        throttleTime(100)\n      )\n      .subscribe((regionType?: RegionType) => {\n        switch (regionType) {\n          case 'FOCUS':\n            if (this.state.rules.playSounds) {\n              if (this.audioDing.current) {\n                this.audioDing.current.currentTime = 0;\n                this.audioDing.current.play();\n              }\n            }\n\n            this.nextSlide(false);\n            break;\n          case undefined:\n            break;\n          default:\n            this.punish(regionType);\n        }\n        return;\n      });\n  }\n\n  async teaseShock() {\n    return this.coyoteDevice?.writePatternA(\n      { amplitude: 8, pulseDuration: 20, pauseDuration: 20 },\n      1000\n    );\n  }\n\n  punishShock() {\n    this.coyoteDevice?.writePatternA(\n      { amplitude: 30, pulseDuration: 12, pauseDuration: 150 },\n      200\n    );\n  }\n\n  componentWillUnmount() {\n    this.destroy$.next(undefined);\n\n    if (this.tobiiWs) {\n      this.tobiiWs.close();\n    }\n\n    this.xtoys?.stop();\n  }\n\n  private readonly renderPane: RefObject<HTMLImageElement>;\n  private readonly audioDing: RefObject<HTMLAudioElement>;\n  private readonly audioMistake: RefObject<HTMLAudioElement>;\n\n  private detectionToRegionType(name: DetectionType): RegionType | undefined {\n    if (this.state.rules.regionMapping.FOCUS.some((e) => e === name)) {\n      return 'FOCUS';\n    }\n\n    if (this.state.rules.regionMapping.HARD_PUNISH.some((e) => e === name)) {\n      return 'HARD_PUNISH';\n    }\n\n    if (this.state.rules.regionMapping.SOFT_PUNISH.some((e) => e === name)) {\n      return 'SOFT_PUNISH';\n    }\n    return undefined;\n  }\n\n  private countHardPunishedZones(meta: PurifyMetadata): number {\n    return meta.output.detections.filter((detection) =>\n      this.state.rules.regionMapping.HARD_PUNISH.includes(detection.name)\n    ).length;\n  }\n\n  private async punish(level: 'SOFT_PUNISH' | 'HARD_PUNISH') {\n\n    if (this.state.xtoys.use) {\n      this.xtoys?.sendXToys({type: \"punish\", severity: level === 'SOFT_PUNISH' ? 'soft' : 'hard'});\n    }\n\n    if (this.state.rules.playSounds) {\n      this.audioMistake.current?.play();\n    }\n    if (level === 'HARD_PUNISH') {\n      const nextSlideIndex = Math.max(0, this.state.currentSlide - 1);\n      const currentSlideData = await this.loadSlide(nextSlideIndex);\n      this.setState(() => ({\n        stats: {\n          ...this.state.stats,\n          points: this.state.stats.points - 10,\n          failures: this.state.stats.failures + 1,\n        },\n        currentSlide: nextSlideIndex,\n        currentSlideData,\n      }));\n      this.setState(() => ({ pauseUntil: Date.now() + 1500 }));\n    } else if (level === 'SOFT_PUNISH') {\n      this.setState((prev) => ({\n        ...prev,\n        stats: { ...prev.stats, points: prev.stats.points - 1 },\n      }));\n    }\n  }\n\n  private static puryFiExtension(blob: Blob) : Promise<PurifyDetection[]> {\n    return new Promise((resolve, reject) =>  {\n      (window as any).puryFiImageByBlob(blob, (ret : any) => {\n        resolve(toPurifyDetections(ret));\n      });\n    })\n  }\n\n  private async loadSlide(index: number): Promise<SlideData[]> {\n\n    const m = this.model; // TODO: fail if model is not loaded\n    const rules = this.state.rules;\n\n    const images = this.state.slides[index].images;\n\n    async function imgToSlideData(img: File): Promise<SlideData> {\n      const htmlImage = await loadImage(await readAsDataUrl(img));\n\n      const detections = (typeof (window as any).puryFiImageByBlob == 'function') ?\n        await MainComponent.puryFiExtension(img)\n        : await processImage(m!, htmlImage);\n\n      const censored = censorImage(\n        htmlImage,\n        detections,\n        (region) =>\n          rules.regionMapping['HARD_PUNISH'].includes(region) ||\n          rules.regionMapping['SOFT_PUNISH'].includes(region)\n      );\n\n      return {\n        name: img.name,\n        detections,\n        dataUrl: URL.createObjectURL(img),\n        dataUrlCensored: await censored,\n        naturalWidth: htmlImage.naturalWidth,\n        naturalHeight: htmlImage.naturalHeight,\n      };\n    }\n\n    return Promise.all(images.map(imgToSlideData));\n  }\n\n  private async win(): Promise<void> {\n    this.setState(() => ({ phase: 'WON' }));\n\n    this.xtoys?.sendXToys({ \"type\": \"won\"});\n\n    await document.exitFullscreen();\n\n  }\n\n  private async nextSlide(skipped: boolean) {\n    const nextSlideIndex = this.state.currentSlide + 1;\n\n    if (nextSlideIndex >= this.state.slides.length) {\n      await this.win();\n      return;\n    }\n\n    const currentSlideData = await this.loadSlide(nextSlideIndex);\n    this.setState(() => ({\n      ...this.state,\n      stats: {\n        ...this.state.stats,\n        points: this.state.stats.points + (skipped ? -10 : 20),\n      },\n      currentSlide: nextSlideIndex,\n      currentSlideData,\n    }));\n    this.renderPane.current?.classList.remove('fadein');\n    void this.renderPane.current?.offsetWidth;\n    this.renderPane.current?.classList.add('fadein');\n    this.setState(() => ({ pauseUntil: Date.now() + 1000 }));\n  }\n\n  private handleMouseMoveOnPane(evt: MouseEvent<HTMLImageElement>) {\n    if (this.state.tobii.disableMouse) {\n      return;\n    }\n\n    const nativeCoords = {\n      x: evt.nativeEvent.clientX,\n      y: evt.nativeEvent.clientY,\n    };\n\n    this.moveToClient(nativeCoords);\n  }\n\n  private sortByRelevance(a: DetectionType, b: DetectionType): number {\n    return this.toPriority(a) - this.toPriority(b);\n  }\n\n  private toPriority(dt: DetectionType): number {\n    if (this.state.rules.regionMapping.FOCUS.includes(dt)) return 0;\n    if (this.state.rules.regionMapping.HARD_PUNISH.includes(dt)) return 1;\n    if (this.state.rules.regionMapping.SOFT_PUNISH.includes(dt)) return 2;\n    return 3;\n  }\n\n  private moveToClient(clientCoordinates: { x: number; y: number }): void {\n    const renderPane = this.renderPane.current!; // TODO: fail if ot does not exist\n\n    const imageCoords = renderPane.getBoundingClientRect();\n    const p = {\n      x: clientCoordinates.x - imageCoords.x,\n      y: clientCoordinates.y - imageCoords.y,\n    };\n    const rScaledToNaturalImageSize = {\n      x: (p.x * renderPane.naturalWidth) / imageCoords.width,\n      y: (p.y * renderPane.naturalHeight) / imageCoords.height,\n    };\n\n    const tolerance = MainComponent.imageSize(renderPane) * 0.04;\n\n    const hit: { imgData: SlideData; detection: PurifyDetection } | undefined =\n      this.state.currentSlideData\n        .map((imgData) => ({\n          imgData: imgData,\n          detection: imgData.detections\n            .filter(\n              (detection) =>\n                MainComponent.distance(\n                  MainComponent.purifyBoundingBoxToRectangle(\n                    detection.bounding_box,\n                    imgData.naturalWidth,\n                    imgData.naturalHeight\n                  ),\n                  rScaledToNaturalImageSize\n                ) < tolerance\n            )\n            // pick the most relevant detection in case we are hitting multiple of them\n            .sort((a, b) => this.sortByRelevance(a.name, b.name))[0],\n        }))\n        .filter((d) => !!d.detection)[0];\n\n    if (hit) {\n      // translate the zoom around the center of the detection\n      const hitRect = MainComponent.purifyBoundingBoxToRectangle(\n        hit.detection.bounding_box,\n        hit.imgData.naturalWidth,\n        hit.imgData.naturalHeight\n      );\n      const hitCenter = {\n        x: hitRect.x + hitRect.width / 2,\n        y: hitRect.y + hitRect.height / 2,\n      };\n      renderPane.style.transformOrigin = `${hitCenter.x}px ${hitCenter.y}px`;\n    }\n\n    this.gazeHits$.next(hit?.detection.name);\n\n    this.setState({\n      ...this.state,\n      cursorPosition: clientCoordinates,\n      cursorHint:\n        this.state.pauseUntil < Date.now() && hit?.detection.name\n          ? this.detectionToRegionType(hit.detection.name!)\n          : undefined,\n    });\n  }\n\n  private static imageSize(element: HTMLImageElement) {\n    return Math.max(element.naturalWidth, element.naturalHeight);\n  }\n\n  private static distance(r: DOMRect, p: { x: number; y: number }) {\n    const cx = Math.max(Math.min(p.x, r.x + r.width), r.x);\n    const cy = Math.max(Math.min(p.y, r.y + r.height), r.y);\n    return Math.sqrt((p.x - cx) * (p.x - cx) + (p.y - cy) * (p.y - cy));\n  }\n\n  private static purifyBoundingBoxToRectangle(\n    boundingBox: BoundingBox,\n    naturalWidth: number,\n    naturalHeight: number\n  ): DOMRect {\n    return new DOMRect(\n      boundingBox[0] * naturalWidth,\n      boundingBox[1] * naturalHeight,\n      (boundingBox[2] - boundingBox[0]) * naturalWidth,\n      (boundingBox[3] - boundingBox[1]) * naturalHeight\n    );\n  }\n\n  private static isImage(f: File): boolean {\n    return (\n      f.type === 'image/jpeg' ||\n      f.type === 'image/png' ||\n      f.type === 'image/webp'\n    );\n  }\n\n  private handleAlternativePurifyFileSelection(files: {\n    [P in RegionType]: readonly File[];\n  }) {\n    const imageFiles = {\n      FOCUS: files.FOCUS.filter(MainComponent.isImage),\n      SOFT_PUNISH: files.SOFT_PUNISH.filter(MainComponent.isImage),\n      HARD_PUNISH: files.HARD_PUNISH.filter(MainComponent.isImage),\n    };\n\n    const focusJsons = imageFiles.FOCUS.map((image) => ({\n      output: {\n        nsfw_score: 0.999,\n        detections: [\n          {\n            bounding_box: [0, 0],\n            confidence: 1,\n            name: 'ARMPITS_EXPOSED',\n          },\n        ],\n      },\n      file: image.name,\n    }));\n  }\n\n  private model: tf.GraphModel | undefined = undefined;\n\n  private async handlePurifyFileSelection(e: ChangeEvent<HTMLInputElement>) {\n    const nativeFiles: FileList = e.target.files!;\n    const allFiles = Array.from(nativeFiles);\n    const imageFiles: File[] = allFiles.filter(MainComponent.isImage);\n    // sort them by name\n    imageFiles.sort((a, b) => a.name.localeCompare(b.name));\n\n    this.setState(() => ({\n      slides: imageFiles.map((f) => ({ images: [f] })),\n    }));\n  }\n\n  private imagesWithFocusRegions(images: SlideData[]) {\n    return images.filter((file) =>\n      file.detections.some(\n        // image must have at least one zone to continue\n        (detection) => this.detectionToRegionType(detection.name) === 'FOCUS'\n      )\n    );\n  }\n\n\n  async startGame(): Promise<void> {\n\n    if (this.state.rules.shuffleGallery) {\n      const gallery = [...this.state.slides];\n\n      for (let i = gallery.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [gallery[i], gallery[j]] = [gallery[j], gallery[i]];\n      }\n      this.setState(() => ({\n        slides: gallery,\n      }));\n    }\n\n    localStorage.setItem('tobii', JSON.stringify(this.state.tobii));\n    if (this.state.tobii.use) {\n      this.startTobii();\n    }\n\n    localStorage.setItem('xtoys', JSON.stringify(this.state.xtoys));\n    if (this.state.xtoys.use) {\n      if (!this.xtoys) {\n        this.xtoys = new XToysClient(this.state.xtoys);\n      }\n      this.xtoys.start();\n    }\n\n    localStorage.setItem('tts', JSON.stringify(this.state.tts));\n    if (this.state.tts.use) {\n      const voice = window.speechSynthesis\n        .getVoices()\n        .filter((v) => v.localService)[0];\n\n      // TODO: start TTS\n      // window.speechSynthesis.speak(utterance);\n    }\n\n    localStorage.setItem('coyote', JSON.stringify(this.state.coyote));\n\n    localStorage.setItem('rules', JSON.stringify(this.state.rules));\n\n    if (this.model === undefined && !(window as any).puryFiImageByBlob) {\n      console.info('loading nsfw model');\n      this.model = await loadmodel(this.state.modelUrl);\n    }\n\n    this.setState(() => ({ phase: 'INGAME', pauseUntil: Date.now() + 1000 }));\n\n    if (this.state.rules.fullscreen) {\n      await document\n        .getElementsByClassName('app')[0]\n        .requestFullscreen({ navigationUI: 'hide' });\n    }\n    await this.nextSlide(false);\n  }\n\n  render(): JSX.Element {\n    return (\n      <div className=\"app\">\n        {this.state.phase === 'INGAME' ? (\n          <header>\n            <h5>\n              Points: {this.state.stats.points}{' '}\n              {this.state.rules.allowSkipImage &&\n              this.state.slides.length > 0 ? (\n                <button onClick={() => this.nextSlide(true)}>Skip Image</button>\n              ) : (\n                ''\n              )}\n            </h5>\n          </header>\n        ) : (\n          ''\n        )}\n        <main>\n          <audio\n            src=\"assets/ding.mp3\"\n            ref={this.audioDing}\n            autoPlay={false}\n            preload={this.state.rules.playSounds ? 'auto' : 'none'}\n          />\n          <audio\n            src=\"assets/beep-03.mp3\"\n            ref={this.audioMistake}\n            autoPlay={false}\n            preload={this.state.rules.playSounds ? 'auto' : 'none'}\n          />\n\n          {this.state.phase === 'SETUP' ? (\n            <div className=\"flex\">\n              <ConfigMenu\n                settings={this.state}\n                onSettingsChanged={(settings) => {\n                  console.log(settings);\n                  this.setState(() => settings);\n                }}\n                handleFileSelection={this.handlePurifyFileSelection}\n                onSelectCoyoteDeviceClicked={this.startCoyote}\n                onForgetCoyoteDeviceClicked={this.forgetCoyote}\n                handleAlternativeSelection={\n                  this.handleAlternativePurifyFileSelection\n                }\n              />\n            </div>\n          ) : (\n            ''\n          )}\n\n          {this.state.slides.length > 0 && this.state.phase === 'SETUP' ? (\n            <button onClick={() => this.startGame()}>\n              Start here ({this.state.slides.length} slides)!\n            </button>\n          ) : (\n            ''\n          )}\n\n          {this.state.phase === 'WON' ? (\n            <h1 className=\"won\">\n              You made it! Your score: {this.state.stats.points}. Hit reload to\n              start over.\n            </h1>\n          ) : this.state.phase === 'INGAME' ? (\n            ''\n          ) : (\n            ''\n          )}\n\n          {this.state.phase !== 'WON' ? ( // must be present in order to bind renderPane in ctor\n            <div className=\"renderContainer\">\n              {this.state.currentSlideData.map((slideData, index) => (\n                <div key={`${slideData.name}${index}`}>\n                  <img\n                    ref={this.renderPane}\n                    key={`${slideData.name}${index}`}\n                    alt=\"Current Slide\"\n                    src={slideData.dataUrlCensored}\n                    data-imagename={slideData.name}\n                    draggable={false}\n                    onMouseMove={this.handleMouseMoveOnPane}\n                    className={`${this.state.rules.softFilter} renderPane`}\n                    style={{\n                      transitionDuration: `${this.state.rules.focusDuration}s`,\n                    }}\n                  />\n                </div>\n              ))}\n            </div>\n          ) : (\n            []\n          )}\n\n          {this.state.rules.showGaze && this.state.phase == 'INGAME' ? (\n            <Cursor\n              size={200}\n              position={this.state.cursorPosition}\n              hint={this.state.cursorHint}\n            />\n          ) : (\n            ''\n          )}\n        </main>\n      </div>\n    );\n  }\n}\n","import {defaultRules, Rules} from './rules';\n\nimport {XToysConfig} from './xtoys';\n\nexport interface Settings {\n  readonly tts: {\n    readonly use: boolean;\n  };\n\n  readonly modelUrl: string;\n\n  readonly xtoys: XToysConfig;\n\n  readonly webgazer: {\n    readonly use: boolean;\n  };\n\n  readonly tobii: {\n    readonly use: boolean;\n    readonly disableMouse: boolean;\n    readonly server?: string;\n  };\n\n  readonly coyote: {\n    readonly use: boolean;\n    readonly pairedDeviceId?: string;\n    readonly powerLevel: number;\n  };\n\n  readonly rules: Rules;\n}\n\nexport const DEFAULT_SETTINGS: Settings = {\n  tts: {\n    use: false,\n  },\n  modelUrl: \"./assets/web_model/model.json\",\n\n  xtoys: {\n    use: false,\n    websocket: '',\n    token: '',\n    ...JSON.parse(localStorage.getItem('xtoys') || '{}'),\n  },\n  rules: {\n    ...defaultRules,\n    ...JSON.parse(localStorage.getItem('rules') || '{}'),\n  },\n  webgazer: {\n    use: false,\n    ...JSON.parse(localStorage.getItem('webgazer') || '{}'),\n  },\n  tobii: {\n    use: false,\n    disableMouse: false,\n    server: 'ws://localhost:8887',\n    ...JSON.parse(localStorage.getItem('tobii') || '{}'),\n  },\n  coyote: {\n    use: false,\n    powerLevel: 0,\n    ...JSON.parse(localStorage.getItem('coyote') || '{}'),\n  },\n};\n","import './app.css';\nimport * as React from 'react';\n\nimport { MainComponent } from './MainComponent';\n\nexport const App = () => {\n  return <MainComponent />;\n};\n\nexport default App;\n","import {DetectionType, PurifyDetection} from './model';\n\nexport function readAsDataUrl(file: File): Promise<string> {\n  return new Promise<string>((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onerror = reject;\n    fr.onload = () => {\n      resolve(fr.result as string);\n    };\n    fr.readAsDataURL(file);\n  });\n}\n\nexport function loadImage(dataUrl: string): Promise<HTMLImageElement> {\n  return new Promise<HTMLImageElement>((resolve, reject) => {\n    const img = new Image();\n    img.src = dataUrl;\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n}\n\nfunction blurRectangle(\n  ctx: CanvasRenderingContext2D,\n  h: number,\n  w: number,\n  blur: number,\n  color: string\n) {\n  ctx.fillStyle = color;\n  ctx.shadowBlur = blur;\n  ctx.shadowColor = color;\n  ctx.shadowOffsetX = w;\n  ctx.shadowOffsetY = h;\n  ctx.fillRect(-w + blur, -h + blur, w - blur * 2, h - blur * 2);\n}\n\nexport async function censorImage(\n  img: HTMLImageElement,\n  detections: PurifyDetection[],\n  censorRegionDecider?: (d:DetectionType) => boolean\n): Promise<string> {\n  const canvas = document.createElement('canvas');\n  canvas.width = img.naturalWidth;\n  canvas.height = img.naturalHeight;\n  const ctx = canvas.getContext('2d')!;\n  ctx.drawImage(img, 0, 0);\n\n  const censorTargets = detections.filter(d => censorRegionDecider? censorRegionDecider(d.name) : true);\n\n\n  ctx.strokeStyle = '#fff';\n  ctx.fillStyle = '#fff';\n\n  const numberFormat = new Intl.NumberFormat('en-GB', {\n    maximumSignificantDigits: 2,\n  });\n  for (const ct of censorTargets) {\n    // draw shape\n    // ctx.fillStyle = \"#F008\";\n    const x = ct.bounding_box[0] * canvas.width;\n    const y = ct.bounding_box[1] * canvas.height;\n    const width = ct.bounding_box[2] * canvas.width - x;\n    const height = ct.bounding_box[3] * canvas.height - y;\n\n    ctx.strokeRect(x, y, width, height);\n\n    ctx.filter = 'blur(20px)';\n    ctx.drawImage(canvas, x, y, width, height, x, y, width, height);\n    ctx.filter = 'none';\n\n    ctx.font = '48px';\n    ctx.fillText(\n      `${ct.name} (${numberFormat.format(ct.confidence)})`,\n      x + 2,\n      y + 12\n    );\n  }\n\n  return canvas.toDataURL('image/png');\n}\n","import {PurifyMetadata} from './model';\n\n\nexport async function loadDemoImages(): Promise<{ imageFiles: File[], jsonFiles: { [_: string]: PurifyMetadata } }> {\n\n  const womanJpgFetch = fetch('assets/demo/woman.jpg');\n  const manJpgFetch = fetch('assets/demo/man.jpg');\n  const [woman, man] = [await womanJpgFetch, await manJpgFetch];\n  const files = [\n    new File([await woman.blob()], 'woman.jpg', {}),\n    new File([await man.blob()], 'man.jpg', {})];\n\n  return {\n    imageFiles: files,\n    jsonFiles: {\n      'man.jpg': {\n        output: {\n          nsfw_score: 1,\n          detections: [\n            {\n              bounding_box: [185, 275, 225, 310],\n              confidence: 1.0,\n              name: 'FACE_MALE',\n            },\n            {\n              bounding_box: [262, 257, 285, 335],\n              confidence: 1.0,\n              name: 'MALE_BREAST_EXPOSED',\n            },\n            {\n              bounding_box: [368, 280, 400, 320],\n              confidence: 1.0,\n              name: 'MALE_GENITALIA_EXPOSED',\n            },\n          ],\n        },\n        file: 'man.jpg',\n      },\n      'woman.jpg': {\n        output: {\n          nsfw_score: 1,\n          detections: [\n            {\n              bounding_box: [288, 546, 368, 625,],\n              confidence: 1.0,\n              name: 'FACE_FEMALE',\n            },\n            {\n              bounding_box: [447.0, 512.0, 514.0, 680.0],\n              confidence: 1.0,\n              name: 'FEMALE_BREAST_EXPOSED',\n            },\n            {\n              bounding_box: [670.0, 562.0, 730.0, 626.0],\n              confidence: 1.0,\n              name: 'FEMALE_GENITALIA_EXPOSED',\n            },\n            {\n              bounding_box: [550.0, 540.0, 645.0, 664.0],\n              confidence: 1.0,\n              name: 'BELLY_EXPOSED',\n            },\n          ],\n        },\n        file: 'woman.jpg',\n      },\n    },\n  };\n}\n","import * as tf from '@tensorflow/tfjs';\nimport {PixelData} from \"@tensorflow/tfjs\";\n\nexport const [modelWeight, modelHeight] = [320, 320];\n\n\nexport async function loadmodel(modelUrl: string): Promise<tf.GraphModel> {\n  console.info('loading model');\n  return await tf.loadGraphModel(modelUrl);\n}\n\nexport type NeutralDetections =\n  | 'ARMPITS_COVERED'\n  | 'ARMPITS_EXPOSED'\n  | 'FEET_COVERED'\n  | 'FEET_EXPOSED'\n  | 'BELLY_EXPOSED'\n  | 'BELLY_COVERED'\n  | 'ANUS_EXPOSED'\n  | 'ANUS_COVERED'\n  | 'BUTTOCKS_EXPOSED'\n  | 'BUTTOCKS_COVERED';\nexport type MaleDetections =\n  | 'FACE_MALE'\n  | 'MALE_GENITALIA_EXPOSED'\n  | 'MALE_GENITALIA_COVERED'\n  | 'MALE_BREAST_EXPOSED'\n  | 'MALE_BREAST_COVERED';\nexport type FemaleDetections =\n  | 'FACE_FEMALE'\n  | 'FEMALE_BREAST_EXPOSED'\n  | 'FEMALE_BREAST_COVERED'\n  | 'FEMALE_GENITALIA_EXPOSED'\n  | 'FEMALE_GENITALIA_COVERED';\nexport type DetectionType =\n  | MaleDetections\n  | FemaleDetections\n  | NeutralDetections;\n\nconst names: Array<DetectionType> = [\n  'BELLY_EXPOSED',\n  'BELLY_COVERED',\n  'BUTTOCKS_EXPOSED',\n  'BUTTOCKS_COVERED',\n  'FEMALE_BREAST_EXPOSED',\n  'FEMALE_BREAST_COVERED',\n  'FEMALE_GENITALIA_EXPOSED',\n  'FEMALE_GENITALIA_COVERED',\n  'MALE_GENITALIA_COVERED',\n  'MALE_GENITALIA_EXPOSED',\n  'MALE_BREAST_EXPOSED',\n  'MALE_BREAST_COVERED',\n  'FACE_FEMALE',\n  'FACE_MALE',\n  'FEET_COVERED',\n  'FEET_EXPOSED',\n  'ARMPITS_COVERED',\n  'ARMPITS_EXPOSED',\n  'ANUS_COVERED',\n  'ANUS_EXPOSED',\n];\n\n/**\n * x1, y1, x2, y2\n */\nexport type BoundingBox = [number, number, number, number];\n\nexport interface PurifyDetection {\n  readonly bounding_box: BoundingBox;\n  readonly confidence: number;\n  readonly name: DetectionType;\n}\n\nexport interface PurifyMetadata {\n  readonly output: {\n    nsfw_score: number;\n    readonly detections: readonly PurifyDetection[];\n  };\n  readonly file: string;\n}\n\nexport function toPurifyDetections(data: {valid_detections: Int32Array, classes: Float32Array, boxes: Float32Array, scores: Float32Array}) : PurifyDetection[] {\n  const valid_detections_count = data.valid_detections[0];\n  const classes = data.classes.slice(0, valid_detections_count);\n  const boxes = data.boxes;\n  const scores = data.scores.slice(0, valid_detections_count);\n\n  return Array.from(scores).map((e, i) => ({\n    bounding_box: Array.from(boxes.slice(i * 4, (i + 1) * 4)) as [\n      number,\n      number,\n      number,\n      number\n    ],\n    name: names[classes[i]],\n    confidence: e,\n  }));\n  }\n\nexport async function processImage(\n  model: tf.GraphModel,\n  pixels:\n    | PixelData\n    | ImageData\n    | HTMLImageElement\n    | HTMLCanvasElement\n    | HTMLVideoElement\n    | ImageBitmap\n): Promise<PurifyDetection[]> {\n  const tfObj = tf.browser.fromPixels(pixels);\n  const input = tf.image.resizeBilinear(tfObj, [modelWeight, modelHeight]);\n  const inputDiv = input.div(255);\n  const expandDims = inputDiv.expandDims(0);\n  const res = await model.executeAsync(expandDims);\n  const [boxes_res, scores_res, classes_res, valid_detections_res] = res as [\n    tf.Tensor,\n    tf.Tensor,\n    tf.Tensor,\n    tf.Tensor\n  ];\n  const valid_detections_count = valid_detections_res.dataSync()[0];\n  const classes = classes_res.dataSync().slice(0, valid_detections_count);\n  const boxes = boxes_res.dataSync();\n  const scores = scores_res.dataSync().slice(0, valid_detections_count);\n\n  boxes_res.dispose();\n  scores_res.dispose();\n  classes_res.dispose();\n  valid_detections_res.dispose();\n  tfObj.dispose();\n  input.dispose();\n  inputDiv.dispose();\n  expandDims.dispose();\n\n  return Array.from(scores).map((e, i) => ({\n    bounding_box: Array.from(boxes.slice(i * 4, (i + 1) * 4)) as [\n      number,\n      number,\n      number,\n      number\n    ],\n    name: names[classes[i]],\n    confidence: e,\n  }));\n}\n","import { DetectionType } from \"./model\";\n\nexport interface Rules {\n  /** Number of seconds to focus on a region to proceed */\n  focusDuration: number;\n\n  regionMapping: { [r in RegionType]: DetectionType[] }\n\n  showGaze: boolean;\n  allowSkipImage: boolean;\n  softFilter: 'pixelate' | 'saturate';\n  playSounds: boolean;\n  fullscreen: boolean;\n  shuffleGallery: boolean;\n}\n\nexport type RegionType = 'FOCUS' | 'SOFT_PUNISH' | 'HARD_PUNISH'\n\nexport const defaultRules: Rules = {\n  focusDuration: 2,\n  regionMapping: {\n    FOCUS : ['FACE_FEMALE', 'FACE_MALE'],\n    SOFT_PUNISH: [\n      'FEMALE_BREAST_COVERED',\n      'FEMALE_GENITALIA_COVERED',\n      'MALE_BREAST_EXPOSED',\n      'BUTTOCKS_EXPOSED',\n    ],\n    HARD_PUNISH: [\n      'MALE_GENITALIA_EXPOSED',\n      'FEMALE_BREAST_EXPOSED',\n      'FEMALE_GENITALIA_EXPOSED',\n      'ANUS_EXPOSED',\n    ]\n  },\n  showGaze: true,\n  allowSkipImage: true,\n  softFilter: 'saturate',\n  playSounds: true,\n  fullscreen: false,\n  shuffleGallery: false,\n};\n","import { DetectionType } from './model';\nimport { RegionType } from './rules';\n\nexport interface XToysConfig {\n  readonly use: boolean;\n  readonly websocket: string;\n  readonly token: string;\n}\n\nexport type XToysCommand = unknown;\n\nexport type XToysEvent = LookAt | Punish |Won;\n\nexport interface Punish {\n  type: 'punish';\n  severity: 'hard' | 'soft';\n}\n\nexport interface Won {\n  type: 'won';\n}\n\nexport interface LookAt {\n  type: 'lookAt';\n  detection: DetectionType;\n  region: RegionType;\n}\n\nexport class XToysClient {\n  private ws?: WebSocket;\n  public constructor(private readonly config: XToysConfig) {}\n\n  public sendXToys(evt: XToysEvent): void {\n    this.ws?.send(JSON.stringify(evt));\n  }\n\n  public stop() {\n    this.ws?.close(1001, \"Going Away\")\n  }\n\n  public start(): void {\n    this.ws = new WebSocket(\n      `wss://webhook.xtoys.app/${this.config.websocket}?token=${this.config.token}`\n    );\n    this.ws.onopen = () => {\n      console.info('YAY, connected to xtoys');\n    };\n\n    this.ws.onmessage = (m) => {\n      console.info('message from xtoys:', JSON.parse(m.data));\n    };\n  }\n}\n","import { StrictMode } from 'react';\nimport * as React from 'react';\nimport * as ReactDOMClient from 'react-dom/client';\n\nimport App from './app/app';\n\nconst rootNode = document.getElementById('root');\nconst root = ReactDOMClient.createRoot(rootNode!);\n\nroot.render(<StrictMode><App /></StrictMode>);\n","module.exports = [[module.id, \"div.setupForms {\\n  max-width: 600px;\\n}\\n\", '', {\"version\":3,\"sources\":[\"/home/runner/work/gentlemans-gallery/gentlemans-gallery/apps/gentlemans-gallery/src/app/ConfigMenu.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,gBAAgB;AAClB\",\"sourcesContent\":[\"div.setupForms {\\n  max-width: 600px;\\n}\\n\"],\"sourceRoot\":\"\"}]]","module.exports = [[module.id, \".cursor {\\n  position: fixed;\\n  padding: 0px;\\n  margin: 0px;\\n  pointer-events: none;\\n  z-index: 999;\\n}\\n\\n.lds-ripple {\\n  display: inline-block;\\n  position: relative;\\n  width: 200px;\\n  height: 200px;\\n}\\n\\n.lds-ripple div {\\n  position: absolute;\\n  border: 6px solid #fff;\\n  opacity: 1;\\n  border-radius: 50%;\\n}\\n\\n.lds-ripple div:first-child {\\n  width: 180px;\\n  height: 180px;\\n  opacity: 0.7;\\n}\\n\\n.lds-ripple div:not(:first-child) {\\n  animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\\n}\\n\\n.cursor[data-hint='FOCUS'] .lds-ripple div:first-child {\\n  border-color: #0f0;\\n  transform: scale(0.01);\\n  transition: transform 5s ease-in;\\n}\\n\\n.cursor[data-hint='SOFT_PUNISH'] .lds-ripple div:first-child {\\n  border-color: #ff0;\\n}\\n\\n.cursor[data-hint='HARD_PUNISH'] .lds-ripple div:first-child {\\n  border-color: #f00;\\n}\\n\\n\", '', {\"version\":3,\"sources\":[\"/home/runner/work/gentlemans-gallery/gentlemans-gallery/apps/gentlemans-gallery/src/app/Cursor.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,eAAe;EACf,YAAY;EACZ,WAAW;EACX,oBAAoB;EACpB,YAAY;AACd;;AAEA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,aAAa;AACf;;AACA;EACE,kBAAkB;EAClB,sBAAsB;EACtB,UAAU;EACV,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,YAAY;AACd;;AAEA;EACE,8DAA8D;AAChE;;AAEA;EACE,kBAAkB;EAClB,sBAAsB;EACtB,gCAAgC;AAClC;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;AACpB\",\"sourcesContent\":[\".cursor {\\n  position: fixed;\\n  padding: 0px;\\n  margin: 0px;\\n  pointer-events: none;\\n  z-index: 999;\\n}\\n\\n.lds-ripple {\\n  display: inline-block;\\n  position: relative;\\n  width: 200px;\\n  height: 200px;\\n}\\n.lds-ripple div {\\n  position: absolute;\\n  border: 6px solid #fff;\\n  opacity: 1;\\n  border-radius: 50%;\\n}\\n\\n.lds-ripple div:first-child {\\n  width: 180px;\\n  height: 180px;\\n  opacity: 0.7;\\n}\\n\\n.lds-ripple div:not(:first-child) {\\n  animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\\n}\\n\\n.cursor[data-hint='FOCUS'] .lds-ripple div:first-child {\\n  border-color: #0f0;\\n  transform: scale(0.01);\\n  transition: transform 5s ease-in;\\n}\\n\\n.cursor[data-hint='SOFT_PUNISH'] .lds-ripple div:first-child {\\n  border-color: #ff0;\\n}\\n\\n.cursor[data-hint='HARD_PUNISH'] .lds-ripple div:first-child {\\n  border-color: #f00;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]]","module.exports = [[module.id, \"@keyframes blur {\\n  0% {\\n    filter: blur(10px);\\n  }\\n  100% {\\n    filter: blur(0px);\\n  }\\n}\\n\\ndiv.renderContainer {\\n  position: absolute;\\n  /*top: 50%;\\n  left: 50%;\\n  margin-right: -50%;\\n  transform: translate(-50%, -50%);\\n  z-index: 998;*/\\n}\\n\\n.renderPane {\\n  -webkit-user-select: none;\\n          user-select: none;\\n\\n  /*transition: transform 0.2s ease-out; /* Animation */\\n  transition: filter 0.1s;\\n  border-radius: 0px;\\n\\n}\\n\\n.renderPane.fadein{\\n  animation: blur 1.5s ease-in;\\n}\\n\\n.renderPane[data-region='FOCUS'] {\\n  transition: transform 5s ease-in, filter 5s;\\n  /*transform: scale(1.2);*/\\n  filter: saturate(120%);\\n}\\n\\n.renderPane[data-region='SOFT_PUNISH'].saturate {\\n  transition: filter 0.1s;\\n  filter: saturate(10%);\\n}\\n\\n.renderPane[data-region='SOFT_PUNISH'].pixelate {\\n  filter: url('#pixelate');\\n}\\n\\n.renderPane[data-region='HARD_PUNISH']{\\n  transition: transform 0.3s ease-in, filter 0.25s;\\n  transform: scale(4);\\n  transition-duration: 0.3s !important;\\n  filter: saturate(300%);\\n}\\n\", '', {\"version\":3,\"sources\":[\"/home/runner/work/gentlemans-gallery/gentlemans-gallery/apps/gentlemans-gallery/src/app/MainComponent.css\"],\"names\":[],\"mappings\":\"AAAA;EACE;IACE,kBAAkB;EACpB;EACA;IACE,iBAAiB;EACnB;AACF;;AAEA;EACE,kBAAkB;EAClB;;;;gBAIc;AAChB;;AAEA;EACE,yBAAiB;UAAjB,iBAAiB;;EAEjB,qDAAqD;EACrD,uBAAuB;EACvB,kBAAkB;;AAEpB;;AAEA;EACE,4BAA4B;AAC9B;;AAEA;EACE,2CAA2C;EAC3C,yBAAyB;EACzB,sBAAsB;AACxB;;AAEA;EACE,uBAAuB;EACvB,qBAAqB;AACvB;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,gDAAgD;EAChD,mBAAmB;EACnB,oCAAoC;EACpC,sBAAsB;AACxB\",\"sourcesContent\":[\"@keyframes blur {\\n  0% {\\n    filter: blur(10px);\\n  }\\n  100% {\\n    filter: blur(0px);\\n  }\\n}\\n\\ndiv.renderContainer {\\n  position: absolute;\\n  /*top: 50%;\\n  left: 50%;\\n  margin-right: -50%;\\n  transform: translate(-50%, -50%);\\n  z-index: 998;*/\\n}\\n\\n.renderPane {\\n  user-select: none;\\n\\n  /*transition: transform 0.2s ease-out; /* Animation */\\n  transition: filter 0.1s;\\n  border-radius: 0px;\\n\\n}\\n\\n.renderPane.fadein{\\n  animation: blur 1.5s ease-in;\\n}\\n\\n.renderPane[data-region='FOCUS'] {\\n  transition: transform 5s ease-in, filter 5s;\\n  /*transform: scale(1.2);*/\\n  filter: saturate(120%);\\n}\\n\\n.renderPane[data-region='SOFT_PUNISH'].saturate {\\n  transition: filter 0.1s;\\n  filter: saturate(10%);\\n}\\n\\n.renderPane[data-region='SOFT_PUNISH'].pixelate {\\n  filter: url('#pixelate');\\n}\\n\\n.renderPane[data-region='HARD_PUNISH']{\\n  transition: transform 0.3s ease-in, filter 0.25s;\\n  transform: scale(4);\\n  transition-duration: 0.3s !important;\\n  filter: saturate(300%);\\n}\\n\"],\"sourceRoot\":\"\"}]]","module.exports = [[module.id, \"/*\\n * Remove template code below\\n */\\n\\n.app {\\n  font-family: sans-serif;\\n  min-width: 300px;\\n}\\n\\n.app .flex {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.app header {\\n  background-color: #143055;\\n  color: white;\\n  padding: 5px;\\n  border-radius: 3px;\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n}\\n\\n.app main {\\n  padding: 0 36px;\\n}\\n\\n.app p {\\n  text-align: center;\\n}\\n\\n.app h1 {\\n  text-align: center;\\n  margin-left: 18px;\\n  font-size: 24px;\\n}\\n\\n.app h2 {\\n  text-align: center;\\n  font-size: 20px;\\n  margin: 40px 0 10px 0;\\n}\\n\\n.app pre {\\n  padding: 9px;\\n  border-radius: 4px;\\n  background-color: black;\\n  color: #eee;\\n}\\n\\n.app details {\\n  border-radius: 4px;\\n  color: #333;\\n  background-color: transparent;\\n  border: 1px solid rgba(0, 0, 0, 0.12);\\n  padding: 3px 9px;\\n  margin-bottom: 9px;\\n  margin-top: 30px;\\n}\\n\\n@media (prefers-color-scheme: dark) {\\n  .app details {\\n    color: #aaa;\\n    border: 1px solid rgba(255, 255, 255, 0.12);\\n  }\\n}\\n\\n.app summary {\\n  outline: none;\\n  height: 36px;\\n  line-height: 36px;\\n}\\n\\n.app .github-star-container {\\n  margin-top: 12px;\\n  line-height: 20px;\\n}\\n\\n.app .github-star-container a {\\n  display: flex;\\n  align-items: center;\\n  text-decoration: none;\\n  color: #333;\\n}\\n\\n.app .github-star-badge {\\n  color: #24292e;\\n  display: flex;\\n  align-items: center;\\n  font-size: 12px;\\n  padding: 3px 10px;\\n  border: 1px solid rgba(27, 31, 35, 0.2);\\n  border-radius: 3px;\\n  background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\\n  margin-left: 4px;\\n  font-weight: 600;\\n}\\n\\n.app .github-star-badge:hover {\\n  background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\\n  border-color: rgba(27, 31, 35, 0.35);\\n  background-position: -0.5em;\\n}\\n\\n.app .github-star-badge .material-icons {\\n  height: 16px;\\n  width: 16px;\\n  margin-right: 4px;\\n}\\n\", '', {\"version\":3,\"sources\":[\"/home/runner/work/gentlemans-gallery/gentlemans-gallery/apps/gentlemans-gallery/src/app/app.css\"],\"names\":[],\"mappings\":\"AAAA;;EAEE;;AAEF;EACE,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,yBAAyB;EACzB,YAAY;EACZ,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,QAAQ;EACR,SAAS;EACT,WAAW;AACb;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,iBAAiB;EACjB,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,qBAAqB;AACvB;;AAGA;EACE,YAAY;EACZ,kBAAkB;EAClB,uBAAuB;EACvB,WAAW;AACb;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,6BAA6B;EAC7B,qCAAqC;EACrC,gBAAgB;EAChB,kBAAkB;EAClB,gBAAgB;AAClB;;AACA;EACE;IACE,WAAW;IACX,2CAA2C;EAC7C;AACF;;AAEA;EACE,aAAa;EACb,YAAY;EACZ,iBAAiB;AACnB;;AAEA;EACE,gBAAgB;EAChB,iBAAiB;AACnB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,qBAAqB;EACrB,WAAW;AACb;;AAEA;EACE,cAAc;EACd,aAAa;EACb,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,uCAAuC;EACvC,kBAAkB;EAClB,gEAAgE;EAChE,gBAAgB;EAChB,gBAAgB;AAClB;;AAEA;EACE,gEAAgE;EAChE,oCAAoC;EACpC,2BAA2B;AAC7B;;AACA;EACE,YAAY;EACZ,WAAW;EACX,iBAAiB;AACnB\",\"sourcesContent\":[\"/*\\n * Remove template code below\\n */\\n\\n.app {\\n  font-family: sans-serif;\\n  min-width: 300px;\\n}\\n\\n.app .flex {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.app header {\\n  background-color: #143055;\\n  color: white;\\n  padding: 5px;\\n  border-radius: 3px;\\n  position: fixed;\\n  top: 0px;\\n  left: 0px;\\n  width: 100%;\\n}\\n\\n.app main {\\n  padding: 0 36px;\\n}\\n\\n.app p {\\n  text-align: center;\\n}\\n\\n.app h1 {\\n  text-align: center;\\n  margin-left: 18px;\\n  font-size: 24px;\\n}\\n\\n.app h2 {\\n  text-align: center;\\n  font-size: 20px;\\n  margin: 40px 0 10px 0;\\n}\\n\\n\\n.app pre {\\n  padding: 9px;\\n  border-radius: 4px;\\n  background-color: black;\\n  color: #eee;\\n}\\n\\n.app details {\\n  border-radius: 4px;\\n  color: #333;\\n  background-color: transparent;\\n  border: 1px solid rgba(0, 0, 0, 0.12);\\n  padding: 3px 9px;\\n  margin-bottom: 9px;\\n  margin-top: 30px;\\n}\\n@media (prefers-color-scheme: dark) {\\n  .app details {\\n    color: #aaa;\\n    border: 1px solid rgba(255, 255, 255, 0.12);\\n  }\\n}\\n\\n.app summary {\\n  outline: none;\\n  height: 36px;\\n  line-height: 36px;\\n}\\n\\n.app .github-star-container {\\n  margin-top: 12px;\\n  line-height: 20px;\\n}\\n\\n.app .github-star-container a {\\n  display: flex;\\n  align-items: center;\\n  text-decoration: none;\\n  color: #333;\\n}\\n\\n.app .github-star-badge {\\n  color: #24292e;\\n  display: flex;\\n  align-items: center;\\n  font-size: 12px;\\n  padding: 3px 10px;\\n  border: 1px solid rgba(27, 31, 35, 0.2);\\n  border-radius: 3px;\\n  background-image: linear-gradient(-180deg, #fafbfc, #eff3f6 90%);\\n  margin-left: 4px;\\n  font-weight: 600;\\n}\\n\\n.app .github-star-badge:hover {\\n  background-image: linear-gradient(-180deg, #f0f3f6, #e6ebf1 90%);\\n  border-color: rgba(27, 31, 35, 0.35);\\n  background-position: -0.5em;\\n}\\n.app .github-star-badge .material-icons {\\n  height: 16px;\\n  width: 16px;\\n  margin-right: 4px;\\n}\\n\"],\"sourceRoot\":\"\"}]]","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./ConfigMenu.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./ConfigMenu.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Cursor.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./Cursor.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./MainComponent.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./MainComponent.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./app.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/@nrwl/web/src/utils/webpack/plugins/raw-css-loader.js!../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].oneOf[4].use[2]!./app.css\";\n       export default content && content.locals ? content.locals : undefined;\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["React","Component","defaultRules","loadDemoImages","ConfigMenu","props","fileSelector","goodImageSelector","badImageSelector","punishImageSelector","state","files","HARD_PUNISH","FOCUS","SOFT_PUNISH","createRef","current","webkitdirectory","e","handleFileSelection","then","dis","alert","setState","Array","from","target","handleAlternativeSelection","settings","rules","regionMapping","onSettingsChanged","options","filter","i","selected","map","value","focusDuration","valueAsNumber","showGaze","checked","allowSkipImage","softFilter","playSounds","document","fullscreenEnabled","fullscreen","shuffleGallery","xtoys","use","websocket","token","tobii","disableMouse","server","webgazer","coyote","onSelectCoyoteDeviceClicked","pairedDeviceId","onForgetCoyoteDeviceClicked","powerLevel","coyoteService","configCharacteristic","POWER_CHARACTERISTIC","PATTERN_A_CHARACTERISTIC","PATTERN_B_CHARACTERISTIC","batteryService","batteryCharacteristic","flipFirstAndThirdByte","buffer","bufferBytes","Uint8Array","b","encodePower","powerA","powerB","ArrayBuffer","view","DataView","setUint8","parsePower","dataView","getUint16","parsePattern","az","ay","getUint8","ax","pulseDuration","pauseDuration","amplitude","encodePattern","setUint16","pairDevice","batteryChangeCallback","powerChangedCallback","previousDeviceId","startTimer","stopTimer","clearInterval","timerHandle","undefined","window","setInterval","untilA","Date","now","patternACharacteristic","writeValue","patternA","untilB","patternB","filters","namePrefix","navigator","bluetooth","getDevices","previousDevices","previousDevice","find","d","id","requestDevice","optionalServices","device","console","log","gatt","connect","getPrimaryService","service","getCharacteristic","config","readValue","configValue","maxPower","powerStep","powerCharacteristic","power","addEventListener","event","currentPower","startNotifications","patternBCharacteristic","battery","batteryLevelCharacteristic","batteryLevel","currentBatteryLevel","writePower","powerLevels","writePatternA","pattern","duration","Promise","resolve","writePatternB","stop","calculateStyle","size","position","top","y","left","x","width","height","Cursor","hint","loadmodel","processImage","toPurifyDetections","Subject","BehaviorSubject","takeUntil","distinctUntilChanged","throttle","of","delay","tap","switchMap","throttleTime","DEFAULT_SETTINGS","censorImage","loadImage","readAsDataUrl","XToysClient","DEFAULT_STATE","slides","currentSlide","currentSlideData","cursorPosition","stats","points","failures","phase","pauseUntil","MainComponent","gazeHits$","eyesTracked$","presence$","destroy$","slideChanges$","tobiiWs","coyoteDevice","tobiiScreenWidth","screen","tobiiScreenHeight","renderPane","audioDing","audioMistake","model","startCoyote","bind","forgetCoyote","handlePurifyFileSelection","nextSlide","handleMouseMoveOnPane","prev","level","info","coyoteState","ws","WebSocket","onmessage","m","parsed","JSON","parse","data","type","screenBounds","Width","Height","userPresence","next","gaze","cutHeight","outerHeight","innerHeight","cutWidth","outerWidth","innerWidth","clientPoint","X","screenX","Y","screenY","moveToClient","eyePosition","HasLeftEyePosition","HasRightEyePosition","onopen","send","pipe","delayUntil","Math","max","leading","trailing","detection","region","detectionToRegionType","sendXToys","regionType","offsetWidth","dataset","teaseShock","punishShock","severity","zone","subscribe","currentTime","play","punish","close","name","some","meta","output","detections","includes","length","nextSlideIndex","loadSlide","index","imgToSlideData","img","htmlImage","puryFiImageByBlob","puryFiExtension","censored","URL","createObjectURL","naturalWidth","naturalHeight","dataUrl","dataUrlCensored","images","all","exitFullscreen","skipped","win","classList","remove","add","evt","nativeCoords","nativeEvent","clientX","clientY","a","toPriority","dt","clientCoordinates","imageCoords","getBoundingClientRect","p","rScaledToNaturalImageSize","tolerance","imageSize","hit","imgData","distance","purifyBoundingBoxToRectangle","bounding_box","sort","sortByRelevance","hitRect","hitCenter","style","transformOrigin","cursorHint","imageFiles","isImage","focusJsons","image","nsfw_score","confidence","file","nativeFiles","allFiles","localeCompare","f","gallery","j","floor","random","localStorage","setItem","stringify","startTobii","start","tts","voice","speechSynthesis","getVoices","v","localService","modelUrl","getElementsByClassName","requestFullscreen","navigationUI","handleAlternativePurifyFileSelection","startGame","slideData","transitionDuration","blob","reject","ret","element","r","cx","min","cy","sqrt","boundingBox","DOMRect","getItem","App","fr","FileReader","onerror","onload","result","readAsDataURL","Image","src","blurRectangle","ctx","h","w","blur","color","fillStyle","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","fillRect","censorRegionDecider","canvas","createElement","getContext","drawImage","censorTargets","strokeStyle","numberFormat","Intl","NumberFormat","maximumSignificantDigits","ct","strokeRect","font","fillText","format","toDataURL","womanJpgFetch","fetch","manJpgFetch","woman","man","File","jsonFiles","tf","modelWeight","modelHeight","loadGraphModel","names","valid_detections_count","valid_detections","classes","slice","boxes","scores","pixels","tfObj","browser","fromPixels","input","resizeBilinear","inputDiv","div","expandDims","executeAsync","res","boxes_res","scores_res","classes_res","valid_detections_res","dataSync","dispose","StrictMode","ReactDOMClient","rootNode","getElementById","root","createRoot","render"],"sourceRoot":""}